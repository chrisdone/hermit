-- set-renderer latex
-- set-renderer unicode-console
-- unicode-terminal

-- for the HERMIT module
-- exit

-- START
consider 'rev
dump "paper/start-rev.tex" "clean" "latex" 80
-- Dig 1

down
consider 'rev
fix-intro
dump "paper/fix-intro.tex" "clean" "latex" 80
-- Dig 2

down
apply-rule ww
up
dump "paper/after-ww.tex" "clean" "latex" 80

-- clean up
down
down
beta-reduce
let-subst
up
beta-reduce
let-subst
up

dump "paper/ww-and-clean.tex" "clean" "latex" 80

-- all-bu (try (compose (var '.) inline))
any-bu (inline '.)
bash
dump "paper/after-bash.tex" "clean" "latex" 80

down
1
let-intro 'work
up
up
dump "paper/after-let-intro.tex" "clean" "latex" 80

down
let-float-arg
up
up
let-float-let
dump "paper/let-pair.tex" "clean" "latex" 80

consider 'work
down

all-bu (try (compose (var 'wrap) inline))
all-bu (try (compose (var 'unwrap) inline))
bash
dump "paper/wrap-unwrap-inlined.tex" "clean" "latex" 80

1
number-binder 0
down
let-subst
number-binder 1
down
let-subst
up
up
up
dump "paper/wrap-unwrap-renamed.tex" "clean" "latex" 80

-- to get repH and absH next to each other in the second case alternative
any-bu (apply-rule repAppend)
any-bu (inline '.)
bash
dump "paper/rule-rep-append.tex" "clean" "latex" 80

-- repH/absH fusion
any-bu (apply-rule repAppFusion)
bash
dump "paper/rep-app-fusion.tex" "clean" "latex" 80

-- this is failing... todo: talk about in paper
-- any-bu (inline 'repH)
any-bu (apply-rule repH)
-- setpp ghc
bash
any-bu (apply-rule append)
bash
any-bu (apply-rule appendNil)
bash
dump "paper/cleanup.tex" "clean" "latex" 80

--all-bu (try (compose (var 'absH) inline))
